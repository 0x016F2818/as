import os

Import('asenv')
Import('MODULES')

cwd = os.path.abspath(os.curdir)
objs = []

objs += SConscript('kernel/SConscript')

if('ECUM' in MODULES):
    objs += Glob('EcuM/*.c')
    asenv.Append(CCFLAGS=' -I%s/EcuM -DUSE_ECUM '%(cwd))

if('SCHM' in MODULES):
    objs += Glob('SchM/*.c')
    asenv.Append(CCFLAGS=' -I%s/SchM -DUSE_SCHM '%(cwd))

Return('objs')